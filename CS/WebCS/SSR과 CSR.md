# SSR/CSR

## SSR (Server Side Rendering)

- 서버쪽에서 렌더링 준비를 끝마친 상태로 클라이언트에 전달하는 방식을 의미한다.

### SSR 단계

![img1 daumcdn](https://github.com/byeongJoo05/Memo/assets/84984586/498de8ce-56e0-44e1-8fd3-79c60784522c)

1. User가 Website 요청을 보낸다.
2. Server는 즉시 렌더링 가능한 html파일을 만든다. (리소스 체크, 컴파일 후 완성된 HTML 컨텐츠로 만든다.)
3. 클라이언트에 전달되는 순간 이미 렌더링 준비가 되어있기에 HTML은 즉시 렌더링 된다. 하지만 사이트 자체 조작은 불가능하다.
4. 클라이언트가 자바스크립트를 다운로드 받는다.
5. 다운 받아지고 있는 사이에 유저는 컨텐츠는 볼 수 있어도 사이트를 조작할 수 없다. 이때 사용자 조작을 기억하고 있는다.
6. 브라우저가 JS 프레임워크를 실행시킨다.
7. JS까지 성공적으로 컴파일 되었기에 기억하고 있던 사용자 조작이 실행되고 이제 웹 페이지는 상호작용 가능해진다.

### 장점

- 초기 페이지 로드시간이 빠르다.
    - 렌더링이 준비된 HTML 파일을 브라우저에서 로드하기 때문에 CSR에 비해 더 빠르다.
- 서버에서 페이지 로직 및 렌더링을 실행하면 자바스크립트를 클라이언트에 보내지 않아도 되므로 `TTI(Time To Interactive)` 를 빠르게 수행할 수 있다.
- `SEO(검색엔진 최적화)` 에 친화적이다.
    - 다 만들어진 페이지를 검색엔진 크롤러가 요청에 대한 응답으로 받기 때문이다.
- 클라이언트 하드웨어 및 소프트웨어 성능에 영향을 덜 받는다.
    - 일반적으로 서버는 더 높은 컴퓨팅 성능과 훨씬 더 높은 네트워킹 속도를 가진 시스템이다.
    - 클라이언트에서는 서버에서 완성된 페이지만 렌더링해주면 된다.
    - 클라이언트의 부담이 CSR에 비해 덜하다.

### 단점

- 페이지 이동시마다 서버에서 페이지를 생성하는데 시간이 걸리기 때문에 `TTFB(Time To First Byte)`가 느리다.
- 페이지 로드가 무겁다면, 오히려 사용자 경험을 개선하는 게 아닌 해칠 수 있다.
    - 초기 페이지 로드시 데이터가 많이 필요한 대시 보드가 예가 될 수 있다.
- 서버는 항상 각 요청이 올 때마다 HTML 파일을 생성하기 때문에 CDN 수준에서의 컨텐츠 캐시가 되지 않는다.
- 서버 호스팅이 필요하다.
    - 클라이언트에서 자바스크립트를 이용해 렌더링하는 CSR에 비해 서버 사이드에서 HTML파일과 안에 내용을 생성해야 하기 때문에 서버 호스팅이 필요하다.

## CSR (Client Side Rendering)

- 렌더링이 클라이언트 쪽에서 일어난다.
- 서버는 요청을 받으면 클라이언트에 HTML과 JS를 보내준다.
- 클라이언트는 그것을 받아 렌더링을 시작한다.

### CSR 단계

![img1 daumcdn 1](https://github.com/byeongJoo05/Memo/assets/84984586/c196f24f-a28f-4c1b-ab58-bdc55b72c063)

1. User가 Website 요청을 보낸다.
2. CDN이 HTML 파일과 JS로 접근할 수 있는 링크를 클라이언트로 보낸다.
    
    > CDN이란?
    엔드 유저의 요청에 물리적으로 가까운 서버에서 요청에 응답하는 방식이다.
    > 
3. 클라이언트는 HTML과 JS를 다운로드 받는다. (SSR과 달리 이때 유저는 아무런 화면을 볼 수 없다.)
4. 브라우저에 자바스크립트를 다운로드 받는다.
5. 다운로드 완료된 JS가 실행되며, 데이터를 위한 API가 호출된다. (이때 유저들은 placeholder를 보게 된다.)
6. 서버가 API로부터의 요청에 응답한다.
7. API로부터 받아온 data를 placeholder 자리에 넣어준다. 이제 페이지는 상호작용이 가능해진다.

### 장점

- 후속 페이지 로드 시간이 더 빠르다.
    - CSR을 위해 이미 모든 지원 스크립트가 사전에 로드되었기 때문에 CSR의 로드 시간이 줄어든다.
- 별도의 API를 호출할 필요가 없는 페이지이거나 지연 로딩 모듈이 필요하지 않다.
    - 이미 스크립트가 캐싱된 경우 인터넷 없이도 해당 CSR 웹 애플리케이션을 실행할 수 있다.
- CSR은 서버를 호출할 때마다 전체 UI를 다시 로드할 필요가 없다.

### 단점

- 초기 페이지 로드 시간이 SSR에 비해 느리다.
    - CSR을 사용하면 브라우저는 브라우저에서 사용 가능한 컨텐츠로 HTML을 컴파일하기 전에 기본 HTML, CSS 및 모든 필수 스크립트를 로드하기 때문이다.
- SEO에 친화적이지 않다.
    - 검색 엔진 크롤러가 해당 페이지에 처음 방문했을 때는 빈 페이지이기 때문에 이해할 수 없다.
    - JS를 실행시킬 수 있는 구글 크롤러와 같은 검색엔진 크롤러가 등장하고 있긴 하지만, 아직 많은 검색 엔진 크롤러들이 지원되지 않는다.
- 페이지 메타데이터의 변경을 위한 추가적인 노력이 필요하다.
    - 한 페이지에서 다른 페이지로 변할 경우 이를 인지 시켜주기 위해 각 페이지에 대한 메타 데이터를 설정하고 클라이언트에서 렌더링하기 위해 추가 노력이 필요하다.
- 브라우저가 페이지를 표시하기 전에 HTML 및 JS 파일을 다운로드하고 프레임워크를 실행하는 동안 사용자는 빈페이지를 보게 되므로 사용자 경험이 좋지 않다.
- 클라이언트의 하드웨어 및 소프트웨어에 너무 많이 의존한다.
    - 사용자 기기에 따라, 하드웨어 및 소프트웨어의 버전에 따라, 최적의 시간에 페이지를 렌더링하지 못하게 될 확률이 크다.
    - 페이지의 이탈률은 페이지 로드시간에 정비례한다.
    - 이탈률이 높을수록 검색엔진 순위 또한 낮아질 수 있다.