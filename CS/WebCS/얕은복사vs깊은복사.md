# 얕은 복사 vs 깊은 복사

## 얕은 복사 (Shallow Copy)

복사하려는 **원본 객체**에 대해서 새로운 단일 **객체** 또는 새로운 복합 **객체**를 만들고 원본 객체를 참조한다. 즉, 다양한 복합 멤버 변수를 갖고 있는 **객체가 인스턴스가 생성될 때** 인스턴스화 되면서 메모리 할당된 **주소의 값**을 참조한다. 또한 얕은 복사는 복사 객체가 원본 객체에 **종속적**이다.

얕은 복사는 주소에 의한 참조 즉, **call-by-reference**와 유사한 개념이 된다.

## 깊은 복사 (Deep Copy)

복사하려는 **원본 객체**에 대해서 새로운 단일 **객체** 또는 새로운 복합 **객체**를 만들고 원본 객체를 대상으로 인스턴스화할 수 있는 클래스 내부의 클래스 변수(static)와 메서드(static)뿐 아니라 인스턴스 값 모두를 복사하여 **원본 객체로부터 독립적인 객체**를 생성한다.

깊은 복사는 새로운 객체가 원본 객체 자체를 Copy 하는 것이다. 즉, **call-by-values**와 유사한 개념이 된다.

|  | 얕은 복사 | 깊은 복사 |
| --- | --- | --- |
| 장점 | 빠르고 간결하다. | 객체 자체를 복사하기 때문에 독립된 새로운 객체로 다형성을 부여하여 사용하거나 재정의할 수 있다. |
| 단점 | 바로 위의 다형성의 장점이 존재하지만 값을 참조하는 것이므로 원본 객체에 종속적인 단점도 존재한다.
원본 객체가 수정되는 경우 복사 객체가 원본 객체와 동일하게 변동이 생긴다. | 모든 인스턴스 값을 갖고 오기 때문에 얕은 복사에 비해서 상대적으로 느리고 복잡하다. |

## 정리

- 새로운 B객체를 생성 후 원본 A객체를 메모리 영역을 참조해서 원본에 종속된 객체를 생성하는 것이 얕은 복사이다.
- 새로운 B객체를 생성 후 원본 A객체를 통째로 복사해서 독립적인 새로운 객체를 메모리 영역에 생성하는 것이 깊은 복사이다.

## 그림으로 보는 얕은 복사, 깊은 복사

### 얕은 복사

![img1 daumcdn](https://github.com/byeongJoo05/Memo/assets/84984586/30fd9892-d5a7-48c6-a58b-137474c6db89)

인스턴스화하여 객체를 메모리에 할당했을 때이다. 얕은 복사는 원본 객체 A와 복사 객체 B가 하나의 할당받은 영역을 지정하여 원본 객체 A가 변경되는 경우 B도 똑같은 메모리 상의 영역을 참조하고 있기 때문에 값이 종속적으로 변경된다. 이것이 **얕은 복사**이다.

### 깊은 복사

![img1 daumcdn 1](https://github.com/byeongJoo05/Memo/assets/84984586/fbee8e9f-46c7-49cd-996e-61bccca11d2e)

위 그림은 좌측은 **원본 객체 A**이며, 우측은 **복사 객체 B**이다. 위의 화살표는 A 객체의 있는 내용들을 모두 복사해서 새로운 메모리 영역에 있는 B객체를 할당해 준 것이다. 이때 A와 B는 컴퓨터로부터 **각각 다른 메모리 영역을 배정** 받았으므로 A객체를 수정하거나 B객체를 수정해도 값에 변화가 없는 것이 **깊은 복사**이다.